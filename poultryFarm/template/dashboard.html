{% include "header.html" %}


<div class="dashboard-main-body">

    <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-24">
        <h6 class="fw-semibold mb-0">NMA -Poultry Farm</h6>
        <ul class="d-flex align-items-center gap-2">
            <form method="POST" action="{% url 'dashboard' %}">
                {% csrf_token %}
                <div class="d-flex flex-wrap align-items-center gap-3">
                    <!-- Dropdown to select plant -->
                    {% if not is_plant_owner %}
                    <select name="plant_id" class="form-select form-select-sm w-auto" required>
                        {% for plant in plants %}
                        <option value="{{ plant.plant_id }}">{{ plant.plant_name }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}
                    <div>
                        <input type="date" name="select_date" class="form-control" value="{{ request.POST.select_date|default:select_date }}" required>
                    </div>

                    <!-- Button to submit the form -->
                    <button type="submit" class="btn btn-sm btn-primary-600">
                        Submit
                    </button>
                </div>
            </form>
        </ul>
    </div>

    <!-- Widgets start -->
    <div class="row gy-4">
        <div class="col-xxl-3 col-sm-6">
            <div class="card p-3 shadow-2 radius-8 h-100 gradient-deep-two-1 border border-white">
                <div class="card-body p-0">
                    <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-8">
                        <div class="d-flex align-items-center gap-10">
                            <span
                                class="mb-0 w-48-px h-48-px bg-cyan-600 flex-shrink-0 text-white d-flex justify-content-center align-items-center rounded-circle h6 mb-0">
                                <img src="/static/asset/images/home-eleven/icons/home-eleven-icon1.svg" alt="">
                            </span>
                            <div>
                                <span class="fw-medium text-secondary-light text-md">Current Running Recipe</span>
                                <h6 class="fw-semibold mt-2">{{ recipename }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-3 col-sm-6">
            <div class="card p-3 shadow-2 radius-8 h-100 gradient-deep-two-2 border border-white">
                <div class="card-body p-0">
                    <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-8">
                        <div class="d-flex align-items-center gap-10">
                            <span
                                class="mb-0 w-48-px h-48-px bg-warning-600 flex-shrink-0 text-white d-flex justify-content-center align-items-center rounded-circle h6 mb-0">
                                <img src="/static/asset/images/home-eleven/icons/home-eleven-icon2.svg" alt="">
                            </span>
                            <div>
                                <span class="fw-medium text-secondary-light text-md">Current Batch Number</span>
                                <h6 class="fw-semibold mt-2">{{ batchno }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-3 col-sm-6">
            <div class="card p-3 shadow-2 radius-8 h-100 gradient-deep-two-3 border border-white">
                <div class="card-body p-0">
                    <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-8">
                        <div class="d-flex align-items-center gap-10">
                            <span
                                class="mb-0 w-48-px h-48-px bg-lilac-600 flex-shrink-0 text-white d-flex justify-content-center align-items-center rounded-circle h6 mb-0">
                                <img src="/static/asset/images/home-eleven/icons/home-eleven-icon3.svg" alt="">
                            </span>
                            <div>
                                <span class="fw-medium text-secondary-light text-md">Total Batch</span>
                                <h6 class="fw-semibold mt-2">{{totalBatch}}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-3 col-sm-6">
            <div class="card p-3 shadow-2 radius-8 h-100 gradient-deep-two-4 border border-white">
                <div class="card-body p-0">
                    <div class="d-flex flex-wrap align-items-center justify-content-between gap-1 mb-8">
                        <div class="d-flex align-items-center gap-10">
                            <span
                                class="mb-0 w-48-px h-48-px bg-success-600 flex-shrink-0 text-white d-flex justify-content-center align-items-center rounded-circle h6 mb-0">
                                <img src="/static/asset/images/home-eleven/icons/home-eleven-icon4.svg" alt="">
                            </span>
                            <div>
                                <span class="fw-medium text-secondary-light text-md">Recipe Start Time</span>
                                <h6 class="fw-semibold mt-2">{{recipestartTime}}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row gy-4 mt-3">
        <div class="col-xxl-6 col-xl-12">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between">
                        <h6 class="mb-2 fw-bold text-lg mb-0">Hammer Mill History</h6>
                    </div>
                    <div class="mt-32">

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Hammer Mill Start Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ hammer_stats.start_time }}
                            </span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Hammer Mill End Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ hammer_stats.end_time }}
                            </span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">

                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Hammer Mill Run Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">{{ hammer_stats.hammer_count|default:"00" }}</span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">

                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Hammer Mill Effective Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">{{ hammer_stats.hammer_avg|floatformat:2|default:"00" }}</span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Hammer Efficiency</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ hammer_stats.hammer_efficiency|floatformat:2}}%
                            </span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Average Load</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ hammer_stats.avg_load|floatformat:2 }}
                            </span>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="col-xxl-6 col-xl-12">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between">
                        <h6 class="mb-2 fw-bold text-lg mb-0">Pellet Mill History</h6>
                    </div>
                    <div class="mt-32">

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Pellet Mill Start Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ pellet_stats.start_time }}
                            </span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Pellet Mill End Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ pellet_stats.end_time }}
                            </span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">

                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Pellet Mill Run Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">{{ pellet_stats.pellet_count|default:"00" }}</span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">

                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Pellet Mill Effective Time</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">{{ pellet_stats.pellet_avg|floatformat:2|default:"00" }}</span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Pellet Efficiency</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ pellet_stats.pellet_efficiency|floatformat:2 }}%
                            </span>
                        </div>

                        <div class="d-flex align-items-center justify-content-between gap-3 mb-24">
                            <div class="d-flex align-items-center">
                                <div class="flex-grow-1">
                                    <h6 class="text-md mb-0 fw-medium">Average Load</h6>
                                </div>
                            </div>
                            <span class="text-primary-light text-md fw-medium">
                                {{ pellet_stats.avg_load|floatformat:2 }}
                            </span>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Table Start -->
    <!-- <div class="card radius-16 mt-24">
        <div class="card-header">
            <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between">
                <h6 class="mb-2 fw-bold text-lg mb-0">Hammer Mill History</h6>
                <a href="javascript:void(0)"
                    class="text-primary-600 hover-text-primary d-flex align-items-center gap-1">
                    View All
                    <iconify-icon icon="solar:alt-arrow-right-linear" class="icon"></iconify-icon>
                </a>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive scroll-sm">
                <table class="table bordered-table sm-table mb-0">
                    <thead>
                        <tr>
                            <th scope="col">Hammer Mill Start Time </th>
                            <th scope="col" class="text-center">Hammer Mill End Time</th>
                            <th scope="col" class="text-center">Hammer Mill Run Time</th>
                            <th scope="col" class="text-center">Hammer Mill Effective Time</th>
                            <th scope="col" class="text-center">Hammer Efficiency</th>
                            <th scope="col" class="text-center">Average Load</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if motor_data %}
                        <tr>
                            <td class="text-center"> {{motor_data.sTime }}</td>
                            <td class="text-center">{{motor_data.ScrewRPM}}</td>
                            <td class="text-center">{{motor_data.hammercurrent}}</td>
                            <td class="text-center">{{motor_data.rvfrpm}}</td>
                            <td class="text-center">{{motor_data.feederRPM}}</td>
                            <td class="text-center">None</td>

                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="4" class="text-center">No Data Available</td>
                        </tr>
                        {% endif %}


                    </tbody>
                </table>
            </div>
        </div>
    </div> -->
    <!-- Table End -->

    <!-- <div class="card radius-16 mt-24">
        <div class="card-header">
            <div class="d-flex align-items-center flex-wrap gap-2 justify-content-between">
                <h6 class="mb-2 fw-bold text-lg mb-0">Pellet Mill History</h6>
                <a href="javascript:void(0)"
                    class="text-primary-600 hover-text-primary d-flex align-items-center gap-1">
                    View All
                    <iconify-icon icon="solar:alt-arrow-right-linear" class="icon"></iconify-icon>
                </a>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive scroll-sm">
                <table class="table bordered-table sm-table mb-0">
                    <thead>
                        <tr>
                            <th scope="col">Pellet Mill Start Time </th>
                            <th scope="col" class="text-center">Pellet Mill End Time</th>
                            <th scope="col" class="text-center">Pellet Mill Run Time</th>
                            <th scope="col" class="text-center">Pellet Mill Effective Time</th>
                            <th scope="col" class="text-center">Pellet Efficiency</th>
                            <th scope="col" class="text-center">Average Load</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="">
                                <div class="d-flex align-items-center">

                                    <div class="flex-grow-1">
                                        <h6 class="text-md mb-0 fw-medium">Dianne Russell</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">osgoodwy@gmail.com</td>
                            <td class="text-center">9562415412263</td>
                            <td class="text-center">$29.00</td>
                            <td class="text-center">Bank</td>
                            <td class="text-center">24 Jun 2024</td>

                        </tr>
                        <tr>
                            <td class="">
                                <div class="d-flex align-items-center">

                                    <div class="flex-grow-1">
                                        <h6 class="text-md mb-0 fw-medium">Wade Warren</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">redaniel@gmail.com</td>
                            <td class="text-center">9562415412263</td>
                            <td class="text-center">$29.00</td>
                            <td class="text-center">Bank</td>
                            <td class="text-center">24 Jun 2024</td>

                        </tr>
                        <tr>
                            <td class="">
                                <div class="d-flex align-items-center">

                                    <div class="flex-grow-1">
                                        <h6 class="text-md mb-0 fw-medium">Albert Flores</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">seema@gmail.com</td>
                            <td class="text-center">9562415412263</td>
                            <td class="text-center">$29.00</td>
                            <td class="text-center">Bank</td>
                            <td class="text-center">24 Jun 2024</td>

                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div> -->

</div>

{% include "footer.html" %}